---
import Layout from '../../layouts/Layout.astro';
import { Image } from 'astro:assets';
import OurWorkHeroImage from "../../images/OurWorkHeroImage.jpg"

export function getStaticPaths() {
    return events
}
export const events = [
    {params: {event: 'jaggo'}},
    {params: {event: 'haldi'}},
    {params: {event: 'mehndi'}},
    {params: {event: 'wedding'}},
    {params: {event: 'reception'}},
  ];

const { event } = Astro.params;
---
<Layout title={event}>
    <script is:inline src="https://product-gallery.cloudinary.com/all.js" type="text/javascript"></script>
    <div id="main">
        <h1>Our Work</h1>
        <h2>Crafting Timeless Memories</h2>
        <Image src={OurWorkHeroImage} alt="An image of an backdrop"/>
    </div>
    <div transition:name="eventTabs" id="tabs">
        {events.map(e => <a  data-astro-reload class:list={{"active" : event == e.params.event}} href={"/gallery/" + e.params.event}>{e.params.event}</a>)}
    </div>
    <div id="gallery">

    </div>
</Layout>

<style>
    #main{
        position: relative;
        height: 70vh;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        color: white;
        margin-top: 20px;
        background: linear-gradient(0deg, rgba(255,255,255,1) 0%, rgba(255,255,255,0) 20%); 
    }
    h1{
        font-size: 8rem;
        margin: 0;
    }
    h2{
        font-size: 2.4rem;
        margin: 0;
    }
    #main > img{
        position: absolute;
        height: 100%;
        width: 100%;
        top: 0;
        object-fit: cover;
        z-index: -2;
    }
    #main:before{
        content: "";
        position: absolute;
        height: 100%;
        width: 100%;
        background-color: rgb(0, 0, 0);
        opacity: 0.2;
        z-index: -1;
    }
    #tabs{
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
    }
    #tabs > a{
        color: black;
        text-decoration: none;
        padding: 10px 0;
        margin: 10px 0;
        text-align: center;
        width: 150px;
        text-transform: capitalize;
    }
    .active {
        color: white !important;
        background-color: black;
    }
    #gallery{
        height: 100vh;
    }
</style>

<script is:inline define:vars={{event}}>
    gallery= cloudinary.galleryWidget({
        container: "#gallery",
        cloudName: "dngcd7taz",
        mediaAssets: [
          {tag: event}, // by default mediaType: "image"
        ],
        aspectRatio: "1:1",
        displayProps: {
            "mode": "expanded",
            "columns": 3,
            "spacing": 15
        },
        
        transformation: {
            "crop": "fill",
        },
        zoomProps: {
            "type": "popup",
            "steps": 3,
        },
      });
      
      gallery.render();
</script>